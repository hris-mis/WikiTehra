<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WikiTEHRA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/jpeg" href="images/pmc.jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://unpkg.com/lucide@latest"></script>
<script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { 
      font-family: 'Inter', sans-serif; 
      position: relative;
      background: url('images/PMC2.png') no-repeat center center fixed;
      background-size: cover;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255, 255, 255, 0.65);
      z-index: -1;
    }

    /* üîπ NAV BUTTONS */
    #main-nav button {
      @apply px-4 py-2 rounded-lg font-semibold text-slate-700 transition 
             hover:bg-sky-100 hover:text-sky-600 hover:scale-105;
    }
    #main-nav button.active-portal {
      @apply bg-sky-600 text-white shadow-md;
    }

    /* üîπ PORTAL CARDS */
    .portal-card {
      @apply bg-gradient-to-b from-sky-50 to-white rounded-xl border border-sky-100 
             px-6 py-5 flex flex-col shadow-sm transition transform duration-300;
      opacity: 0;
      transform: translateY(20px);
    }
    .portal-card.show {
      opacity: 1;
      transform: translateY(0);
    }
    .portal-card:hover {
      transform: translateY(-8px) scale(1.03);
    }

    /* üîπ SEARCH INPUT */
    #searchInput:focus {
      @apply ring-2 ring-sky-400 shadow-lg;
      transition: all 0.3s ease;
    }

    /* üîπ MODAL ANIMATION */
    #guide-modal {
      backdrop-filter: blur(4px) saturate(1.2);
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.3s ease;
    }
    #guide-modal.show {
      opacity: 1;
      transform: scale(1);
    }
  /* üîπ LOGO BOUNCE */
  @keyframes bounceIn {
    0% { transform: scale(0.3); opacity: 0; }
    60% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); }
  }
  header .w-12 {
    animation: bounceIn 0.6s ease;
  }
  /* üîπ SEARCH RESULTS FADE */
  .search-results {
    opacity: 0;
    transform: translateY(15px);
    transition: all 0.4s ease;
  }
  .search-results.show {
    opacity: 1;
    transform: translateY(0);
  }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">

  <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- HEADER -->
    <header class="pb-8">
      <div class="flex items-center justify-between bg-white/80 rounded-2xl shadow-lg px-8 py-6 mb-6 border border-slate-200">
        <div class="flex items-center space-x-4">
          <div class="w-12 h-12 bg-gradient-to-br from-sky-600 to-sky-400 rounded-xl flex items-center justify-center text-white text-2xl font-extrabold">W</div>
          <h1 class="text-3xl font-extrabold text-slate-900">WikiTEHRA</h1>
        </div>
        <nav id="main-nav" class="flex space-x-4"></nav>
      </div>
    </header>

    <!-- MAIN -->
    <main>
      <section id="portal-details-section">
        <div class="text-center mb-12">
          <h2 id="portal-title" class="text-3xl md:text-4xl font-bold text-slate-900 mb-4">How can we help you?</h2>
          <p id="portal-description" class="max-w-2xl mx-auto text-slate-600"></p>
        </div>

        <!-- Video -->
        <div id="portal-video" class="mb-12"></div>

        <!-- Search -->
        <div class="relative mb-12">
          <input id="searchInput" type="text" placeholder="Search guides..." class="w-full px-6 py-4 rounded-full border border-slate-300 shadow-md">
          <svg class="absolute right-6 top-1/2 -translate-y-1/2 w-6 h-6 text-slate-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" /></svg>
        </div>

  <!-- Sections -->
        <div id="portal-sections-container" class="portal-info grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>        
        <!-- MODAL -->
        <div id="guide-modal" class="fixed inset-0 z-50 hidden bg-gray-900 bg-opacity-70 flex items-center justify-center">
          <div class="bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
            <!-- Header -->
            <div class="flex justify-between items-center p-6 border-b bg-sky-50">
              <h3 id="modal-title" class="text-2xl font-bold text-sky-800"></h3>
              <button id="close-modal-btn" class="text-sky-500 hover:text-sky-700">‚úï</button>
            </div>
            <!-- Content -->
            <div class="p-6 overflow-y-auto flex-grow">
              <div class="flex gap-3 mb-6">
                <a id="modal-download-link" href="#" download class="px-4 py-2 bg-sky-600 text-white rounded-lg">Download</a>
                <a id="modal-maximize-link" href="#" target="_blank" class="px-4 py-2 bg-slate-600 text-white rounded-lg">Maximize</a>
              </div>
              <div id="media-viewer-container"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  // ‚úÖ Full portals object with all your guides (nothing removed)
  const portals = {
    "HR Portal": {
      description: "Guides for HR and managers on payroll, employee management, and system configuration.",
      videos: ["public/videos/hr-fixed.mp4"],
      sections: {
        "Administration": {
          "Approver Assignment": { type: "pdf", file: "guides/APPROVER ASSIGNMENT ON EMPLOYEES.pdf" },
          "Onboarding": { type: "pdf", file: "guides/Onboarding.pdf" },
          "Set Employee Inactive": { type: "pdf", file: "guides/How to Set an Employee as Inactive in HRIS.pdf" }
        },
        "Employee Management": {
          "Adding Profiles in Employee 201": { type: "pdf", file: "guides/ADDING PROFILES IN EMPLOYEE 201.pdf" },
          "Adding Employee Profile to HRIS": { type: "pdf", file: "guides/EMPLOYEE 201_ADDING EMPLOYEE PROFILE TO HRIS.pdf" },
          "Setup of New Employee": { type: "pdf", file: "guides/New Employee.pdf" },
          "Employee Assignment Guide": { type: "pdf", file: "guides/Employee Assignment Guide.pdf" },
          "Offboarding": { type: "pdf", file: "guides/Offboarding.pdf" }
        },
        "Payroll": {
          "Paygroup and Paysheet": { type: "pdf", file: "guides/PAYGROUP AND PAYSHEET.pdf" },
          "Paysheet Generation": { type: "pdf", file: "guides/PAYSHEET GENERATION.pdf" }
        },
        "Reports": {
          "Generating Employee Work Anniversary Report": { type: "pdf", file: "guides/Generating Employee Work Anniversary Report.pdf" }
        },
        "HR Policy & Services": {
          "HR Policy Guide": { type: "pdf", file: "guides/HR Policy Guide.pdf" },
          "HR Services Module": { type: "pdf", file: "guides/HR Services Module.pdf" },
          "Employee Relations Guide": { type: "pdf", file: "guides/Employee Relations Guide.pdf" },
          "Safety & Health Guide": { type: "pdf", file: "guides/Safety & Health Guide v2.pdf" },
          "Talent Acquisition": { type: "pdf", file: "guides/Talent Acquisition.pdf" }
        },
        "Recruitment": {
          "Edit Job Description and Qualifications": { type: "pdf", file: "guides/Edit Job Description and Qualifications.pdf" },
          "No Hiring Process for Job Position": { type: "pdf", file: "guides/No Hiring Process for Job Position.pdf" }
        },
        "Time & Attendance": {
          "Process of Attendance Adjustment": { type: "pdf", file: "guides/Process of Attendance Adjustment.pdf" },
          "Schedule IAR Generation": { type: "pdf", file: "guides/Schedule IAR Generation.pdf" },
        },
        "Personnel Development": {
          "Training Calendar": { type: "pdf", file: "guides/Training Calendar.pdf" },
          "HR Portal Personnel Development": { type: "pdf", file: "guides/Personnel Dev.pdf" },          
        }
      }
    },
    "Employee Portal": {
      description: "Guides for employees on using the portal to manage their profile, file requests, and view information.",
      videos: ["public/videos/employee-fixed.mp4"],
      sections: {
        "General Guides": {
          "Guide in Filing": { type: "docx", file: "guides/Employee Portal - Guide in Filing.docx" },
          "Update Employee Profile Guide": { type: "pdf", file: "guides/Employee Profile:EP.pdf" },
          "Schedule, Leave, and Attendance Module Process": { type: "pdf", file: "guides/Schedule, Leave, and Attendance Module Process.pdf" }
        }
      }
    },
    "Applicant Portal": {
      description: "Guides for applicants to register, upload documents, and complete profiles.",
      sections: {
        "Registration": {
          "Applicant Portal Registration": { type: "pdf", file: "guides/APPLICANT PORTAL_Registration and Profile Completion.pdf" },
          "Document Upload": { type: "docx", file: "guides/Document upload in Applicant Portal Guide.docx" }
        }
      }
    }
  }
  const portalNav = document.getElementById('main-nav');
  const portalTitle = document.getElementById('portal-title');
  const portalDescription = document.getElementById('portal-description');
  const sectionsContainer = document.getElementById('portal-sections-container');
  const portalVideo = document.getElementById('portal-video');
  const modal = document.getElementById('guide-modal');
  const modalTitle = document.getElementById('modal-title');
  const mediaContainer = document.getElementById('media-viewer-container');
  const modalDownloadLink = document.getElementById('modal-download-link');
  const modalMaximizeLink = document.getElementById('modal-maximize-link');
  const closeModalBtn = document.getElementById('close-modal-btn');
  const searchInput = document.getElementById('searchInput');

  let currentPortal = "HR Portal";

        `
          )
          .join("")}
      </div>
    </div>
  `;
}
    // video
    portalVideo.innerHTML = "";
    if (portal.videos) {
      portal.videos.forEach(v => {
        portalVideo.innerHTML += `<video controls class="w-full rounded-lg shadow"><source src="${v}" type="video/mp4"></video>`;
      });
    }

// Grid for sections
sectionsContainer.innerHTML = '';

Object.entries(portal.sections).forEach(([section, guides]) => {
  // Section card
  const sectionCard = document.createElement('div');
  sectionCard.className = 'portal-card p-6 rounded-lg shadow bg-white flex flex-col gap-3';
  // Section header
  const header = document.createElement('div');
  header.className = 'flex items-center mb-4';
  // pick emoji by section name
let emoji = "üìò";
if (section.includes("Administration")) emoji = "‚öôÔ∏è";
if (section.includes("Employee")) emoji = "üë§";
if (section.includes("Payroll")) emoji = "üí∞";
if (section.includes("Reports")) emoji = "üìä";
if (section.includes("HR Policy")) emoji = "üìë";
if (section.includes("Recruitment")) emoji = "üéØ";
if (section.includes("Time")) emoji = "‚è∞";
if (section.includes("Personnel")) emoji = "üìÇ";

header.innerHTML = `
  <span class="text-xl mr-2">${emoji}</span>
  <span class="text-lg font-semibold text-slate-800">${section}</span>
`;
  sectionCard.appendChild(header);

  // Guides list
  const ul = document.createElement('ul');
  ul.className = 'space-y-3';

  Object.entries(guides).forEach(([task, info]) => {
    const li = document.createElement('li');
    const btn = document.createElement('button');
    btn.className = 'w-full flex items-center px-4 py-2 rounded-lg bg-white border border-sky-200 hover:bg-sky-50 transition text-left text-sm';
    btn.innerHTML = `
      <span class="text-sky-500 text-base mr-2">&#10003;</span>
      <span class="font-medium text-slate-800">${task}</span>
    `;
    btn.onclick = () => showGuideModal(info, task);
    li.appendChild(btn);
    ul.appendChild(li);
  });

  sectionCard.appendChild(ul);
  sectionsContainer.appendChild(sectionCard);
  // üîπ Animate cards in sequence
setTimeout(() => {
  document.querySelectorAll('.portal-card').forEach((c, i) => {
    setTimeout(() => c.classList.add('show'), i * 100);
  });
}, 50);

});
    // button state
    document.querySelectorAll("#main-nav button").forEach(b => b.classList.remove("active-portal"));
    if (button) button.classList.add("active-portal");
  }

  // Expose showGuideModal globally for inline onclick
window.showGuideModal = function(info, taskName) {
  modalTitle.textContent = taskName;
  modalDownloadLink.href = info.file;
  let ext = info.file.split(".").pop().toLowerCase();
  let previewFile = info.file;

  if (["docx","doc","xlsx","xls","rtf"].includes(ext)) {
    previewFile = info.file.replace(/\.[^.]+$/, ".pdf");
  }

  modalMaximizeLink.href = previewFile;
  mediaContainer.innerHTML = "";

  if (previewFile.endsWith(".pdf")) {
    mediaContainer.innerHTML = `<iframe src="${previewFile}" class="w-full h-[600px]"></iframe>`;
  } else if (["mp4","mov"].includes(ext)) {
    mediaContainer.innerHTML = `<video controls class="w-full h-[400px]"><source src="${info.file}" type="video/mp4"></video>`;
  } else if (["png","jpg","jpeg","gif"].includes(ext)) {
    mediaContainer.innerHTML = `<img src="${info.file}" class="w-full rounded-lg">`;
  } else {
    mediaContainer.innerHTML = `<p class="text-slate-600">Preview not available</p>`;
  }

  modal.classList.remove("hidden");
  setTimeout(() => modal.classList.add("show"), 10);
}
closeModalBtn.onclick = () => {
  modal.classList.remove("show");
  setTimeout(() => modal.classList.add("hidden"), 300);
};
  // build nav
Object.keys(portals).forEach(p => {
  const btn = document.createElement("button");
  btn.textContent = p;
  btn.className = "px-4 py-2 rounded";
  btn.onclick = () => { 
    currentPortal = p; 
    renderPortal(p, btn); 
  };
  portalNav.appendChild(btn);

  // highlight the first portal (default)
  if (p === currentPortal) btn.classList.add("active-portal");
});
  renderPortal(currentPortal, portalNav.querySelector("button"));
  // search
  searchInput.addEventListener("input", function() {
    const q = this.value.toLowerCase();
    sectionsContainer.innerHTML = "";
    if (!q) { renderPortal(currentPortal, portalNav.querySelector(".active-portal")); return; }
    let found = false;
    Object.values(portals).forEach(portal => {
      Object.entries(portal.sections).forEach(([s, tasks]) => {
        Object.entries(tasks).forEach(([name, task]) => {
          if (name.toLowerCase().includes(q)) {
            found = true;
            const li = document.createElement("li");
            const btn = document.createElement("button");
            btn.className = 'guide-btn w-full flex items-center px-6 py-4 rounded-xl bg-white border border-sky-100 shadow hover:bg-sky-50 transition text-left';
            const highlighted = name.replace(new RegExp(`(${q})`, "gi"), "<mark class='bg-yellow-200'>$1</mark>");
            btn.innerHTML = `
              <span class="text-sky-500 text-xl mr-3">&#10003;</span>
              <span class="font-semibold text-slate-800 text-lg">${highlighted}</span>
            `;
            btn.onclick = () => showGuideModal(task, name);
            li.appendChild(btn);

            // Wrap in a temporary "Search Results" section
            if (!sectionsContainer.querySelector(".search-results")) {
              const sectionCard = document.createElement("div");
              sectionCard.className = "bg-white rounded-2xl shadow-lg border border-sky-100 px-8 py-7 flex flex-col w-[340px] mb-8 search-results";
              sectionCard.innerHTML = `
                <div class="flex items-center mb-6">
                  <span class="text-sky-500 text-2xl font-bold mr-2">+</span>
                  <span class="text-2xl font-extrabold text-slate-800">Search Results</span>
                </div>
                <div class="flex-1"><ul class="space-y-4"></ul></div>
              `;
              sectionsContainer.appendChild(sectionCard);
            }
            sectionsContainer.querySelector(".search-results ul").appendChild(li);
            setTimeout(() => {
              sectionsContainer.querySelectorAll(".search-results").forEach(el => el.classList.add("show"));
            }, 50);
          }
        });
      });
    });
    if (!found) sectionsContainer.innerHTML = `<p class="text-center text-slate-500">No results</p>`;
  });

  // ‚úÖ Back to Top button (inside DOMContentLoaded)
  const backToTop = document.getElementById('back-to-top');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 200) backToTop.classList.remove('hidden');
    else backToTop.classList.add('hidden');
  });
  backToTop.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
});
</script>
<!-- Back to Top Button -->
<button id="back-to-top" 
  class="fixed bottom-6 right-6 bg-sky-600 text-white px-4 py-2 rounded-full shadow-lg hidden">
  ‚Üë Top
</button>
</body>
</html>
