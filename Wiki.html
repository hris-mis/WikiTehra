<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <!-- Firebase SDK -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>WikiTEHRA</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="icon" type="image/jpeg" href="images/pmc.jpeg">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script type="module">
  // Import Firebase SDKs from CDN
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, signOut, onAuthStateChanged } 
    from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";

  // ✅ Correct Firebase config
  const firebaseConfig = {
    apiKey: "AIzaSyDEGYeA0ere_txZPbwxMH5-BRflZqh_ef0",
    authDomain: "wikitehra.firebaseapp.com",
    projectId: "wikitehra",
    storageBucket: "wikitehra.appspot.com",  // ✅ fixed
    messagingSenderId: "761691537990",
    appId: "1:761691537990:web:fb6f60c918b2ddca52c047"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // Expose auth globally so your other script (below) can use it
  window.auth = auth;
  window.createUserWithEmailAndPassword = createUserWithEmailAndPassword;
  window.signInWithEmailAndPassword = signInWithEmailAndPassword;
  window.signOut = signOut;
  window.onAuthStateChanged = onAuthStateChanged;
</script>

  <!-- Your existing page content here -->
  <style>
    
    body { 
      font-family: 'Inter', sans-serif; 
      position: relative;
      background: url('images/PMC2.png') no-repeat center center fixed;
      background-size: cover;
    }
    body::before {
      content: "";
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(255, 255, 255, 0.65);
      z-index: -1;
    }

    /* 🔹 NAV BUTTONS */
    #main-nav button {
      @apply px-4 py-2 rounded-lg font-semibold text-slate-700 transition 
             hover:bg-sky-100 hover:text-sky-600 hover:scale-105;
    }
    #main-nav button.active-portal {
      @apply bg-sky-600 text-white shadow-md;
    }

/* 🔹 PORTAL CARDS with gradient border animation */
/* ✨ Polished Portal Cards */
.portal-card {
  @apply rounded-xl px-6 py-5 flex flex-col transition duration-300;
  background: rgba(255, 255, 255, 0.6); /* more transparent */
  backdrop-filter: blur(14px) saturate(1.3);
  -webkit-backdrop-filter: blur(14px) saturate(1.3);
  border: 1px solid rgba(255, 255, 255, 0.25);
  border-radius: 1rem;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.05);
  position: relative;
  z-index: 1;
  opacity: 0;
  transform: translateY(20px);
  transition: all 0.3s ease;
}

/* soft gradient glow inside the card */
.portal-card::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 1rem;
  background: linear-gradient(145deg, rgba(99, 102, 241, 0.08), rgba(236, 72, 153, 0.08));
  z-index: -1;
}

/* when showing in view */
.portal-card.show {
  opacity: 1;
  transform: translateY(0);
}

/* hover effect */
.portal-card:hover {
  transform: translateY(-6px) scale(1.02);
  box-shadow: 0 12px 28px rgba(0, 0, 0, 0.08);
}
/* ✨ Gradient title strip for category headers */
.portal-card h2 {
  position: relative;
  font-weight: 700;
  font-size: 1.1rem;
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
}

.portal-card h2::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  height: 3px;
  width: 60px;
  border-radius: 9999px;
  background: linear-gradient(90deg, #6366f1, #ec4899);
}
/* ========== Equal-height grid + nicer translucent cards ========== */
#portal-sections-container {
  /* ensure grid items stretch to same height in each row */
  grid-auto-rows: 1fr;
  align-items: stretch; /* let children stretch */
}

/* card visual reset (thin gradient border + frosted interior) */
.portal-card {
  box-sizing: border-box;
  height: 100%;
  min-height: 300px;                 /* same baseline height for each card */
  display: flex;
  flex-direction: column;
  gap: 1rem;
  padding: 1.25rem;
  border-radius: 14px;
  background: rgba(255,255,255,0.62); /* translucent white */
  -webkit-backdrop-filter: blur(8px) saturate(1.05);
  backdrop-filter: blur(8px) saturate(1.05);
  border: 2px solid transparent; /* use border-image for gradient */
  border-image: linear-gradient(90deg, #60a5fa, #a78bfa) 1;
  box-shadow: 0 8px 20px rgba(2,6,23,0.06);
  transition: transform .22s ease, box-shadow .22s ease;
  align-self: stretch;
}

/* simple hover uplift */
.portal-card:hover {
  transform: translateY(-6px);
  box-shadow: 0 18px 42px rgba(2,6,23,0.08);
}

/* header (icon + title) alignment */
.portal-card .flex.items-center.mb-4,
.portal-card > .card-header {
  display: flex;
  align-items: center;
  gap: .75rem;
  margin-bottom: .6rem;
}

/* make title clearer and remove default margins */
.portal-card .card-header .title,
.portal-card .flex.items-center.mb-4 > span:nth-child(2) {
  font-weight: 700;
  font-size: 1.05rem;
  color: #0f172a;
  margin: 0;
}

/* keep the list to grow/shrink and push spacing nicely */
.portal-card ul {
  display: flex;
  flex-direction: column;
  gap: .75rem;
  margin: 0;
  padding: 0;
  list-style: none;
  flex: 1; /* so each card's list expands and cards match height */
}

/* keep each guide button compact and consistent */
.portal-card ul li button {
  width: 100%;
  text-align: left;
}

/* responsive tweak: reduce min-height on small screens */
@media (max-width: 768px) {
  .portal-card { min-height: 220px; }
}


    /* 🔹 SEARCH INPUT */
    #searchInput:focus {
      @apply ring-2 ring-sky-400 shadow-lg;
      transition: all 0.3s ease;
    }

    /* 🔹 MODAL ANIMATION */
    #guide-modal {
      backdrop-filter: blur(4px) saturate(1.2);
      opacity: 0;
      transform: scale(0.95);
      transition: all 0.3s ease;
    }
    #guide-modal.show {
      opacity: 1;
      transform: scale(1);
    }
  /* 🔹 LOGO BOUNCE */
  @keyframes bounceIn {
    0% { transform: scale(0.3); opacity: 0; }
    60% { transform: scale(1.1); opacity: 1; }
    100% { transform: scale(1); }
  }
  header .w-12 {
    animation: bounceIn 0.6s ease;
  }
  /* 🔹 SEARCH RESULTS FADE */
  .search-results {
    opacity: 0;
    transform: translateY(15px);
    transition: all 0.4s ease;
  }
  .search-results.show {
    opacity: 1;
    transform: translateY(0);
  }
  </style>
</head>
<body class="bg-slate-50 text-slate-800">
  <div id="app" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
<!-- 🔹 Register/Login/Logout buttons -->
<div class="flex justify-end gap-2 p-4">
  <button id="registerBtn" class="bg-green-600 text-white px-4 py-2 rounded-lg shadow-md">
    Register
  </button>
  <button id="loginBtn" class="bg-sky-600 text-white px-4 py-2 rounded-lg shadow-md">
    Login
  </button>
  <button id="logoutBtn" class="bg-red-600 text-white px-4 py-2 rounded-lg shadow-md hidden">
    Logout
  </button>
</div>
    <!-- HEADER -->
    <header class="pb-8">
      <div class="flex items-center justify-between bg-white/80 rounded-2xl shadow-lg px-8 py-6 mb-6 border border-slate-200">
        <div class="flex items-center space-x-4">
<div class="w-12 h-12 rounded-xl overflow-hidden flex items-center justify-center shadow-md">
  <img src="images/pmc.jpeg" alt="W Logo" class="w-full h-full object-cover">
</div>
          <h1 class="text-3xl font-extrabold text-slate-900">WikiTEHRA</h1>
        </div>
        <nav id="main-nav" class="flex space-x-4"></nav>
      </div>
    </header>

    <!-- MAIN -->
    <main>
<div id="portal-content" class="hidden">
  <section id="portal-details-section">
  <!-- Hero Section -->
  <section class="text-center mb-14">
    <h2 id="portal-title" class="text-4xl md:text-5xl font-extrabold text-slate-900 mb-4">
      How can we help you?
    </h2>
    <p id="portal-description" class="max-w-2xl mx-auto text-lg text-slate-600 mb-8">
      Search our guides or browse by category below.
    </p>

    <!-- Video (optional, will only render if exists) -->
    <div id="portal-video" class="mb-8"></div>

    <!-- Search -->
    <div class="relative max-w-2xl mx-auto">
      <input id="searchInput" type="text" placeholder="Search guides..."
        class="w-full px-6 py-4 rounded-full border border-slate-300 shadow-md focus:ring-2 focus:ring-sky-400">
      <svg class="absolute right-6 top-1/2 -translate-y-1/2 w-6 h-6 text-slate-400"
        xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
          d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z" />
      </svg>
    </div>
  </section>

  <!-- Sections -->
  <div id="portal-sections-container"
       class="portal-info grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>
      <!-- MODAL -->
        <div id="guide-modal" class="fixed inset-0 z-50 hidden bg-gray-900 bg-opacity-70 flex items-center justify-center">
          <div class="bg-white rounded-3xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col">
            <!-- Header -->
            <div class="flex justify-between items-center p-6 border-b bg-sky-50">
              <h3 id="modal-title" class="text-2xl font-bold text-sky-800"></h3>
              <button id="close-modal-btn" class="text-sky-500 hover:text-sky-700">✕</button>
            </div>
            <!-- Content -->
            <div class="p-6 overflow-y-auto flex-grow">
              <div class="flex gap-3 mb-6">
                <a id="modal-download-link" href="#" download class="px-4 py-2 bg-sky-600 text-white rounded-lg">Download</a>
                <a id="modal-maximize-link" href="#" target="_blank" class="px-4 py-2 bg-slate-600 text-white rounded-lg">Maximize</a>
              </div>
              <div id="media-viewer-container"></div>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

<!-- SweetAlert2 library -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<!-- Your custom script -->
<script>
document.addEventListener('DOMContentLoaded', () => {
// Swal.fire("Hi!", "SweetAlert2 is working 🎉", "success");

  // ✅ all your existing WikiTEHRA code here...
  
  const portals = {
  // ✅ Full portals object with all your guides (nothing removed)
    "HR Portal": {
      description: "Guides for HR and managers on payroll, employee management, and system configuration.",
      videos: ["public/videos/hr-fixed.mp4"],
      sections: {
        "Administration": {
          "Approver Assignment": { type: "pdf", file: "guides/APPROVER ASSIGNMENT ON EMPLOYEES.pdf" },
          "Onboarding": { type: "pdf", file: "guides/Onboarding.pdf" },
          "Set Employee Inactive": { type: "pdf", file: "guides/How to Set an Employee as Inactive in HRIS.pdf" }
        },
        "Employee Management": {
          "Adding Profiles in Employee 201": { type: "pdf", file: "guides/ADDING PROFILES IN EMPLOYEE 201.pdf" },
          "Adding Employee Profile to HRIS": { type: "pdf", file: "guides/EMPLOYEE 201_ADDING EMPLOYEE PROFILE TO HRIS.pdf" },
          "Setup of New Employee": { type: "pdf", file: "guides/New Employee.pdf" },
          "Employee Assignment Guide": { type: "pdf", file: "guides/Employee Assignment Guide.pdf" },
          "Offboarding": { type: "pdf", file: "guides/Offboarding.pdf" }
        },
        "Payroll": {
          "Paygroup and Paysheet": { type: "pdf", file: "guides/PAYGROUP AND PAYSHEET.pdf" },
          "Paysheet Generation": { type: "pdf", file: "guides/PAYSHEET GENERATION.pdf" }
        },
        "Reports": {
          "Generating Employee Work Anniversary Report": { type: "pdf", file: "guides/Generating Employee Work Anniversary Report.pdf" }
        },
        "HR Policy & Services": {
          "HR Policy Guide": { type: "pdf", file: "guides/HR Policy Guide.pdf" },
          "HR Services Module": { type: "pdf", file: "guides/HR Services Module.pdf" },
          "Employee Relations Guide": { type: "pdf", file: "guides/Employee Relations Guide.pdf" },
          "Safety & Health Guide": { type: "pdf", file: "guides/Safety & Health Guide v2.pdf" },
          "Talent Acquisition": { type: "pdf", file: "guides/Talent Acquisition.pdf" }
        },
        "Recruitment": {
          "Edit Job Description and Qualifications": { type: "pdf", file: "guides/Edit Job Description and Qualifications.pdf" },
          "No Hiring Process for Job Position": { type: "pdf", file: "guides/No Hiring Process for Job Position.pdf" }
        },
        "Time & Attendance": {
          "Process of Attendance Adjustment": { type: "pdf", file: "guides/Process of Attendance Adjustment.pdf" },
          "Schedule IAR Generation": { type: "pdf", file: "guides/Schedule IAR Generation.pdf" },
        },
        "Personnel Development": {
          "Training Calendar": { type: "pdf", file: "guides/Training Calendar.pdf" },
          "HR Portal Personnel Development": { type: "pdf", file: "guides/Personnel Dev.pdf" },          
        }
      }
    },
    "Employee Portal": {
      description: "Guides for employees on using the portal to manage their profile, file requests, and view information.",
      videos: ["public/videos/employee-fixed.mp4"],
      sections: {
        "General Guides": {
          "Guide in Filing": { type: "docx", file: "guides/Employee Portal - Guide in Filing.docx" },
          "Update Employee Profile Guide": { type: "pdf", file: "guides/Employee Profile:EP.pdf" },
          "Schedule, Leave, and Attendance Module Process": { type: "pdf", file: "guides/Schedule, Leave, and Attendance Module Process.pdf" }
        }
      }
    },
    "Applicant Portal": {
      description: "Guides for applicants to register, upload documents, and complete profiles.",
      sections: {
        "Registration": {
          "Applicant Portal Registration": { type: "pdf", file: "guides/APPLICANT PORTAL_Registration and Profile Completion.pdf" },
          "Document Upload": { type: "docx", file: "guides/Document upload in Applicant Portal Guide.docx" }
        }
      }
    }
  }
  const portalNav = document.getElementById('main-nav');
  const portalTitle = document.getElementById('portal-title');
  const portalDescription = document.getElementById('portal-description');
  const sectionsContainer = document.getElementById('portal-sections-container');
  const portalVideo = document.getElementById('portal-video');
  const modal = document.getElementById('guide-modal');
  const modalTitle = document.getElementById('modal-title');
  const mediaContainer = document.getElementById('media-viewer-container');
  const modalDownloadLink = document.getElementById('modal-download-link');
  const modalMaximizeLink = document.getElementById('modal-maximize-link');
  const closeModalBtn = document.getElementById('close-modal-btn');
  const searchInput = document.getElementById('searchInput');
  const backToTop = document.getElementById('back-to-top');

   let currentPortal = "HR Portal";

  // ✅ RENDER PORTAL FUNCTION
  function renderPortal(portalName, button) {
    const portal = portals[portalName];
    portalTitle.textContent = portalName;
    portalDescription.textContent = portal.description || "";

    // Video
    portalVideo.innerHTML = "";
    if (portal.videos) {
      portal.videos.forEach(v => {
        portalVideo.innerHTML += `<video controls class="w-full rounded-lg shadow"><source src="${v}" type="video/mp4"></video>`;
      });
    }

    // Clear sections
    sectionsContainer.innerHTML = "";

    // Build section cards
    Object.entries(portal.sections).forEach(([section, guides]) => {
      const sectionCard = document.createElement("div");
      sectionCard.className = "portal-card p-6 rounded-lg shadow bg-white flex flex-col gap-3";

      // Section header with emoji
      const header = document.createElement("div");
header.className = "card-header";
      let emoji = "📘";
      if (section.includes("Administration")) emoji = "⚙️";
      if (section.includes("Employee")) emoji = "👤";
      if (section.includes("Payroll")) emoji = "💰";
      if (section.includes("Reports")) emoji = "📊";
      if (section.includes("HR Policy")) emoji = "📑";
      if (section.includes("Recruitment")) emoji = "🎯";
      if (section.includes("Time")) emoji = "⏰";
      if (section.includes("Personnel")) emoji = "📂";

      header.innerHTML = `
        <span class="text-xl mr-2">${emoji}</span>
        <span class="text-lg font-semibold text-slate-800">${section}</span>
      `;
      sectionCard.appendChild(header);

      // Guides list
      const ul = document.createElement("ul");
      ul.className = "space-y-3";

      Object.entries(guides).forEach(([task, info]) => {
        const li = document.createElement("li");
        const btn = document.createElement("button");
        btn.className = "w-full flex items-center px-4 py-2 rounded-lg bg-white border border-sky-200 hover:bg-sky-50 transition text-left text-sm";
        btn.innerHTML = `
          <span class="text-sky-500 text-base mr-2">&#10003;</span>
          <span class="font-medium text-slate-800">${task}</span>
        `;
        btn.onclick = () => showGuideModal(info, task);
        li.appendChild(btn);
        ul.appendChild(li);
      });

      sectionCard.appendChild(ul);
      sectionsContainer.appendChild(sectionCard);
    });

    // Animate cards
    setTimeout(() => {
      document.querySelectorAll(".portal-card").forEach((c, i) => {
        setTimeout(() => c.classList.add("show"), i * 100);
      });
    }, 50);

    // Button active state
    document.querySelectorAll("#main-nav button").forEach(b => b.classList.remove("active-portal"));
    if (button) button.classList.add("active-portal");
  }

  // ✅ MODAL HANDLING
  window.showGuideModal = function(info, taskName) {
    modalTitle.textContent = taskName;
    modalDownloadLink.href = info.file;
    let ext = info.file.split(".").pop().toLowerCase();
    let previewFile = info.file;

    if (["docx","doc","xlsx","xls","rtf"].includes(ext)) {
      previewFile = info.file.replace(/\.[^.]+$/, ".pdf");
    }

    modalMaximizeLink.href = previewFile;
    mediaContainer.innerHTML = "";

    if (previewFile.endsWith(".pdf")) {
      mediaContainer.innerHTML = `<iframe src="${previewFile}" class="w-full h-[600px]"></iframe>`;
    } else if (["mp4","mov"].includes(ext)) {
      mediaContainer.innerHTML = `<video controls class="w-full h-[400px]"><source src="${info.file}" type="video/mp4"></video>`;
    } else if (["png","jpg","jpeg","gif"].includes(ext)) {
      mediaContainer.innerHTML = `<img src="${info.file}" class="w-full rounded-lg">`;
    } else {
      mediaContainer.innerHTML = `<p class="text-slate-600">Preview not available</p>`;
    }

    modal.classList.remove("hidden");
    setTimeout(() => modal.classList.add("show"), 10);
  };

  closeModalBtn.onclick = () => {
    modal.classList.remove("show");
    setTimeout(() => modal.classList.add("hidden"), 300);
  };

  // ✅ NAV BUILD
  Object.keys(portals).forEach(p => {
    const btn = document.createElement("button");
    btn.textContent = p;
    btn.className = "px-4 py-2 rounded";
    btn.onclick = () => { 
      currentPortal = p; 
      renderPortal(p, btn); 
    };
    portalNav.appendChild(btn);
    if (p === currentPortal) btn.classList.add("active-portal");
  });

// Initial render
const firstBtn = portalNav.querySelector("button");
renderPortal(currentPortal, firstBtn);
firstBtn.classList.add("active-portal");


  // ✅ SEARCH
  searchInput.addEventListener("input", function() {
    const q = this.value.toLowerCase();
    sectionsContainer.innerHTML = "";
    if (!q) { renderPortal(currentPortal, portalNav.querySelector(".active-portal")); return; }
    let found = false;

    Object.values(portals).forEach(portal => {
      Object.entries(portal.sections).forEach(([s, tasks]) => {
        Object.entries(tasks).forEach(([name, task]) => {
          if (name.toLowerCase().includes(q)) {
            found = true;
            const li = document.createElement("li");
            const btn = document.createElement("button");
            btn.className = 'guide-btn w-full flex items-center px-6 py-4 rounded-xl bg-white border border-sky-100 shadow hover:bg-sky-50 transition text-left';
            const highlighted = name.replace(new RegExp(`(${q})`, "gi"), "<mark class='bg-yellow-200'>$1</mark>");
            btn.innerHTML = `
              <span class="text-sky-500 text-xl mr-3">&#10003;</span>
              <span class="font-semibold text-slate-800 text-lg">${highlighted}</span>
            `;
            btn.onclick = () => showGuideModal(task, name);
            li.appendChild(btn);

            if (!sectionsContainer.querySelector(".search-results")) {
              const sectionCard = document.createElement("div");
              sectionCard.className = "bg-white rounded-2xl shadow-lg border border-sky-100 px-8 py-7 flex flex-col w-[340px] mb-8 search-results";
              sectionCard.innerHTML = `
                <div class="flex items-center mb-6">
                  <span class="text-sky-500 text-2xl font-bold mr-2">+</span>
                  <span class="text-2xl font-extrabold text-slate-800">Search Results</span>
                </div>
                <div class="flex-1"><ul class="space-y-4"></ul></div>
              `;
              sectionsContainer.appendChild(sectionCard);
            }
            sectionsContainer.querySelector(".search-results ul").appendChild(li);
            setTimeout(() => {
              sectionsContainer.querySelectorAll(".search-results").forEach(el => el.classList.add("show"));
            }, 50);
          }
        });
      });
    });

    if (!found) sectionsContainer.innerHTML = `<p class="text-center text-slate-500">No results</p>`;
  });

   // 🔹 Login/Logout code starts here
  const registerBtn = document.getElementById("registerBtn");
  const loginBtn = document.getElementById("loginBtn");
  const logoutBtn = document.getElementById("logoutBtn");
  const portalContent = document.getElementById("portal-content");
  const backToTop = document.getElementById("back-to-top");

  // ✅ Register
  registerBtn.addEventListener("click", async () => {
    const { value: formValues } = await Swal.fire({
      title: "Register",
      html: `
        <input id="reg-email" type="email" class="swal2-input" placeholder="Email">
        <input id="reg-password" type="password" class="swal2-input" placeholder="Password">
        <input id="reg-confirm" type="password" class="swal2-input" placeholder="Confirm Password">
      `,
      focusConfirm: false,
      preConfirm: () => {
        const email = document.getElementById("reg-email").value;
        const password = document.getElementById("reg-password").value;
        const confirm = document.getElementById("reg-confirm").value;

        if (!email || !password) {
          Swal.showValidationMessage("Please enter email and password");
          return false;
        }
        if (password !== confirm) {
          Swal.showValidationMessage("Passwords do not match");
          return false;
        }
        return { email, password };
      }
    });

    if (formValues) {
      try {
        const userCredential = await window.createUserWithEmailAndPassword(
          window.auth,
          formValues.email,
          formValues.password
        );
        Swal.fire("Welcome!", `Account created as ${userCredential.user.email} 🎉`, "success");
      } catch (error) {
        Swal.fire("Error", error.message, "error");
      }
    }
  });

  // ✅ Login
  loginBtn.addEventListener("click", async () => {
    const { value: formValues } = await Swal.fire({
      title: "Login",
      html: `
        <input id="email" type="email" class="swal2-input" placeholder="Email">
        <input id="password" type="password" class="swal2-input" placeholder="Password">
      `,
      focusConfirm: false,
      preConfirm: () => {
        return {
          email: document.getElementById("email").value,
          password: document.getElementById("password").value
        };
      }
    });

    if (formValues) {
      try {
        await window.signInWithEmailAndPassword(
          window.auth,
          formValues.email,
          formValues.password
        );
        Swal.fire("Welcome!", "You are now logged in 🎉", "success");
      } catch (error) {
        Swal.fire("Error", error.message, "error");
      }
    }
  });

  // ✅ Logout
  logoutBtn.addEventListener("click", async () => {
    await window.signOut(window.auth);
    Swal.fire("Goodbye!", "You are now logged out 👋", "info");
  });

  // ✅ Auth state listener
  window.onAuthStateChanged(window.auth, (user) => {
    if (user) {
      loginBtn.classList.add("hidden");
      registerBtn.classList.add("hidden");
      logoutBtn.classList.remove("hidden");
      portalContent.classList.remove("hidden");
    } else {
      loginBtn.classList.remove("hidden");
      registerBtn.classList.remove("hidden");
      logoutBtn.classList.add("hidden");
      portalContent.classList.add("hidden");
    }
  });

  // ✅ Back to Top button
  if (backToTop) {
    window.addEventListener('scroll', () => {
      if (window.scrollY > 200) backToTop.classList.remove('hidden');
      else backToTop.classList.add('hidden');
    });
    backToTop.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
  }
</script>

<!-- Back to Top Button -->
<button id="back-to-top" 
  class="fixed bottom-6 right-6 bg-sky-600 text-white px-4 py-2 rounded-full shadow-lg hidden">
  ↑ Top
</button>
</body>
</html>
